{"version":3,"sources":["services/blogs.js","components/Form.js","components/Blog.js","services/login.js","components/AddBlog.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","token","getAll","axios","get","then","response","data","setToken","newToken","create","newBlog","a","console","log","config","headers","Authorization","post","LoginForm","handleLogin","setUsername","setPassword","password","username","handleSignup","setStatus","buttontext","onSubmit","type","value","name","onChange","target","onClick","Blog","blog","title","author","login","credentials","register","AddBlog","handleAdd","setAuthor","setTitle","setUrl","url","Notification","message","toLowerCase","includes","className","App","useState","blogs","setBlogs","user","setUser","notification","setNotification","siteStatus","useEffect","blogService","loggedUser","window","localStorage","getItem","JSON","parse","e","preventDefault","concat","setTimeout","loginService","setItem","stringify","status","handleRegister","errorMessage","val","removeItem","map","id","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.90b213eb.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst baseUrl = '/api/blogs';\r\n\r\nlet token = null;\r\n\r\nconst setToken = (newToken) => {\r\n    token = `bearer ${newToken}`;\r\n};\r\n\r\nconst create = async (newBlog) => {\r\n    console.log(token);\r\n    const config = {\r\n        headers: { Authorization: token },\r\n    };\r\n\r\n    const response = await axios.post(baseUrl, newBlog, config);\r\n    return response.data;\r\n};\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then((response) =>{ return response.data;});\r\n};\r\n\r\nexport default { getAll, setToken, create };\r\n","import React from 'react';\r\nconst LoginForm = ({\r\n    handleLogin,\r\n    setUsername,\r\n    setPassword,\r\n    password,\r\n    username,\r\n    handleSignup,\r\n    setStatus\r\n}) => {\r\n    let buttontext = 'login';\r\n    if (handleSignup) {\r\n        handleLogin = handleSignup;\r\n        buttontext = 'signup';\r\n    }\r\n    return (\r\n        <form onSubmit={handleLogin}>\r\n            <div>\r\n                username\r\n                <input\r\n                    type=\"text\"\r\n                    value={username}\r\n                    name=\"Username\"\r\n                    onChange={({ target }) => setUsername(target.value)}\r\n                />\r\n            </div>\r\n            <div>\r\n                password\r\n                <input\r\n                    type=\"password\"\r\n                    value={password}\r\n                    name=\"Password\"\r\n                    onChange={({ target }) => setPassword(target.value)}\r\n                />\r\n            </div>\r\n            <button type=\"submit\">{buttontext}</button>\r\n            <button  onClick={() => setStatus('home')}>home</button>\r\n        </form>\r\n        \r\n    );\r\n};\r\n\r\nconst BlogForm = ({ addBlog, newBlog, handleBlogChange }) => (\r\n    <form onSubmit={addBlog}>\r\n        <input value={newBlog} onChange={handleBlogChange} />\r\n        <button type=\"submit\">save</button>\r\n    </form>\r\n);\r\n\r\nexport default LoginForm;\r\nBlogForm;\r\n","import React from 'react';\r\nconst Blog = ({ blog }) => (\r\n    <div>\r\n        {blog.title} {blog.author}\r\n    </div>\r\n);\r\n\r\nexport default Blog;\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/login';\r\nconst registerUrl = '/api/users';\r\n\r\nconst login = async (credentials) => {\r\n    const response = await axios.post(baseUrl, credentials);\r\n    return response.data;\r\n};\r\n\r\nconst register = async (credentials) => {\r\n    const response = await axios.post(registerUrl, credentials);\r\n    return response.data;\r\n};\r\n\r\nexport default { login, register };\r\n","import React from 'react';\r\nconst AddBlog = ({\r\n    handleAdd,\r\n    setAuthor,\r\n    setTitle,\r\n    setUrl,\r\n    author,\r\n    title,\r\n    url,\r\n}) => (\r\n    <form onSubmit={handleAdd}>\r\n        <div>\r\n            <h2>new blog</h2>\r\n            author\r\n            <input\r\n                type=\"text\"\r\n                value={author}\r\n                name=\"Author\"\r\n                onChange={({ target }) => setAuthor(target.value)}\r\n            />\r\n        </div>\r\n        <div>\r\n            title\r\n            <input\r\n                type=\"text\"\r\n                value={title}\r\n                name=\"Title\"\r\n                onChange={({ target }) => setTitle(target.value)}\r\n            />\r\n        </div>\r\n        <div>\r\n            url\r\n            <input\r\n                type=\"text\"\r\n                value={url}\r\n                name=\"url\"\r\n                onChange={({ target }) => setUrl(target.value)}\r\n            />\r\n        </div>\r\n        <button type=\"submit\">submit</button>\r\n    </form>\r\n);\r\n\r\nexport default AddBlog;\r\n","import React from 'react';\r\nconst Notification = ({ message }) => {\r\n    console.log(typeof(message));\r\n    if (message === null) {\r\n        return null;\r\n    }\r\n    if(message.toLowerCase().includes('error')){\r\n        return <div className=\"error\">{message}</div>;\r\n    }\r\n    return <div className=\"notification\">{message}</div>;\r\n};\r\n\r\nexport default Notification; ","import React, { useState, useEffect } from 'react';\r\n//import Blog from './components/Blog';\r\nimport blogService from './services/blogs';\r\nimport LoginForm from './components/Form';\r\n//import BlogForm from './components/Form';\r\nimport Blog from './components/Blog';\r\nimport loginService from './services/login';\r\nimport AddBlog from './components/AddBlog';\r\nimport Notification from './components/Notification';\r\n\r\nconst App = () => {\r\n    const [blogs, setBlogs] = useState([]);\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [user, setUser] = useState(null);\r\n    const [author, setAuthor] = useState('');\r\n    const [title, setTitle] = useState('');\r\n    const [url, setUrl] = useState('');\r\n    const [notification, setNotification] = useState(null);\r\n    const [siteStatus, setStatus] = useState('home');\r\n    useEffect(() => {\r\n        blogService.getAll().then((blogs) => setBlogs(blogs));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const loggedUser = window.localStorage.getItem('loggedBlogAppUser');\r\n        if (loggedUser) {\r\n            const user = JSON.parse(loggedUser);\r\n            setUser(user);\r\n            blogService.setToken(user.token);\r\n            setStatus('different');\r\n        }\r\n    }, []);\r\n\r\n    const handleLogoff = () => {\r\n        window.localStorage.removeItem('loggedBlogAppUser');\r\n        setUser(null);\r\n        setStatus('home');\r\n    };\r\n\r\n    const handleAdd = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const blog = {\r\n                author: author,\r\n                title: title,\r\n                url: url,\r\n            };\r\n            const newBlog = await blogService.create(blog);\r\n            setBlogs(blogs.concat(newBlog));\r\n            setNotification(\r\n                `You've successfully added ${blog.title} to the blog list.`\r\n            );\r\n            setTimeout(() => {\r\n                setNotification(null);\r\n            }, 5000);\r\n        } catch (exception) {\r\n            setNotification(`${exception}`);\r\n            setTimeout(() => {\r\n                setNotification(null);\r\n            }, 5000);\r\n        }\r\n    };\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const user = await loginService.login({\r\n                username,\r\n                password,\r\n            });\r\n            window.localStorage.setItem(\r\n                'loggedBlogAppUser',\r\n                JSON.stringify(user)\r\n            );\r\n            setUser(user);\r\n            setNotification('You\\'ve succesfully logged in.');\r\n            setTimeout(() => {\r\n                setNotification(null);\r\n            }, 5000);\r\n            setUsername('');\r\n            setPassword('');\r\n            setStatus('different');\r\n        } catch (exception) {\r\n            console.log(exception);\r\n            if (exception.response.status == 401) {\r\n                setNotification('Error: wrong password or username');\r\n                setTimeout(() => {\r\n                    setNotification(null);\r\n                }, 5000);\r\n            } else {\r\n                setNotification(`${exception}`);\r\n                setTimeout(() => {\r\n                    setNotification(null);\r\n                }, 5000);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            await loginService.register({\r\n                username,\r\n                password,\r\n            });\r\n            setNotification('You\\'ve succesfully registered.');\r\n            setTimeout(() => {\r\n                setNotification(null);\r\n            }, 5000);\r\n            setUsername('');\r\n            setPassword('');\r\n            setStatus('home');\r\n        } catch (exception) {\r\n            let errorMessage = exception;\r\n            if(JSON.stringify(exception.response.data).includes('unique')){\r\n                errorMessage = 'Error: there\\'s already an user with this name';\r\n            }\r\n            if(JSON.stringify(exception.response.data).includes('bigger than 3')){\r\n                errorMessage = 'Error: both the password and the username need to be bigger than 3';\r\n            }\r\n            console.log(exception.response.data);\r\n            setNotification(`${errorMessage}`);\r\n            setTimeout(() => {\r\n                setNotification(null);\r\n            }, 5000);\r\n        }\r\n    };\r\n\r\n    const handleLoginForm = () => (\r\n        <LoginForm\r\n            handleLogin={(val) => handleLogin(val)}\r\n            setUsername={(val) => setUsername(val)}\r\n            setPassword={(val) => setPassword(val)}\r\n            password={password}\r\n            username={username}\r\n            setStatus={(val) => setStatus(val)}\r\n        />\r\n    );\r\n\r\n    const handleSignup = () => (\r\n        <LoginForm\r\n            setUsername={(val) => setUsername(val)}\r\n            setPassword={(val) => setPassword(val)}\r\n            password={password}\r\n            username={username}\r\n            handleSignup={(val) => handleRegister(val)}\r\n            setStatus={(val) => setStatus(val)}\r\n        />\r\n    );\r\n\r\n    const handleAddBlog = () => (\r\n        <AddBlog\r\n            handleAdd={(val) => handleAdd(val)}\r\n            setAuthor={(val) => setAuthor(val)}\r\n            setTitle={(val) => setTitle(val)}\r\n            setUrl={(val) => setUrl(val)}\r\n            author={author}\r\n            title={title}\r\n            url={url}\r\n            \r\n        />\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <Notification message={notification} />\r\n            {siteStatus == 'home' ? (\r\n                <div>\r\n                    <h1>login or register</h1>\r\n                    <button onClick={() => setStatus('login')}>login</button>\r\n                    <button onClick={() => setStatus('register')}>register</button>\r\n                </div>\r\n            ) : siteStatus == 'register' ? (\r\n                <div>{handleSignup()}</div>\r\n            ) : siteStatus == 'login' ? (\r\n                <div>{handleLoginForm()}</div>\r\n            ) : (\r\n                <div>\r\n                    <p>\r\n                        {user.name} logged-in\r\n                        <button onClick={() => handleLogoff()}>logout</button>\r\n                    </p>\r\n                    <div>\r\n                        \r\n                        {handleAddBlog()}\r\n                        <h2>blogs</h2>\r\n                        {blogs.map((blog) => (\r\n                            <Blog key={blog.id} blog={blog} />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}